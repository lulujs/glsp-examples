/* Port样式 - 默认隐藏 */
.tasklist-port {
    fill: #28a745; /* 统一使用绿色 */
    stroke: #ffffff;
    stroke-width: 2;
    opacity: 0 !important; /* 默认隐藏 */
    transition:
        opacity 0.2s ease,
        stroke-width 0.2s ease;
    cursor: crosshair;
    pointer-events: none;
}

/* 当节点被悬停或选中时显示该节点的所有ports */
.tasklist-end:hover .tasklist-port,
.tasklist-task:hover .tasklist-port,
.tasklist-decision:hover .tasklist-port,
.tasklist-start:hover .tasklist-port,
.tasklist-api:hover .tasklist-port,
.tasklist-decision-table:hover .tasklist-port,
.tasklist-auto:hover .tasklist-port,
.tasklist-subprocess:hover .tasklist-port,
.node.selected .tasklist-port,
.node.mouseover .tasklist-port {
    opacity: 1 !important;
    pointer-events: all;
}

/* 当正在连接时显示所有ports */
.sprotty-graph.connecting .tasklist-port,
.sprotty-graph .sprotty-edge.drawing .tasklist-port {
    opacity: 1 !important;
    pointer-events: all;
}

/* 所有类型port使用统一的绿色 */
.rectangular-port,
.hexagon-port,
.circle-port,
.diamond-port,
.octagon-port {
    fill: #28a745;
}

/* Port悬停效果 - 当鼠标在port上时增强显示效果 */
.tasklist-port:hover {
    stroke-width: 4;
    filter: drop-shadow(0 0 4px currentColor);
}

/* 连接时的高亮效果 */
.tasklist-port.connection-target,
.tasklist-port.connection-source {
    opacity: 1 !important;
    fill: #ff6b6b;
    stroke: #ffffff;
    stroke-width: 4;
    animation: pulse-opacity 2s ease-in-out infinite;
    pointer-events: all;
}

/* 可连接的port高亮 */
.tasklist-port.connectable {
    opacity: 1 !important;
    stroke: #00ff00;
    stroke-width: 4;
    animation: glow 1.5s ease-in-out infinite;
    pointer-events: all;
}

/* 只改变透明度的脉冲动画，避免闪动 */
@keyframes pulse-opacity {
    0%,
    100% {
        opacity: 1;
    }
    50% {
        opacity: 0.6;
    }
}

/* 发光动画 */
@keyframes glow {
    0%,
    100% {
        filter: drop-shadow(0 0 2px currentColor);
    }
    50% {
        filter: drop-shadow(0 0 6px currentColor);
    }
}
